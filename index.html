<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PH·∫†M VƒÇN HO√Ä BUID VIETQR NAPAS 247</title>
  <style>
    body {
      background: #f9f9f9;
      color: #000;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      transition: background 0.3s, color 0.3s;
    }
    body.dark-mode {
      background: #111;
      color: #fff;
    }
    .container {
      background: #fff;
      padding: 25px;
      border-radius: 16px;
      width: 100%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 4px 25px rgba(0,0,0,0.15);
      transition: background 0.3s, color 0.3s;
      box-sizing: border-box;
    }
    body.dark-mode .container { background: #1c1c1c; }
    h2 {
      margin-bottom: 20px;
      font-size: 18px;
      letter-spacing: 1px;
      color: #008000;
      font-weight: bold;
      text-shadow: 0 0 8px rgba(0,128,0,0.4);
    }
    .input-group {
      position: relative;
      margin-top: 18px;
      text-align: left;
      width: 100%;
    }
    .input-group input, 
    .input-group select {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid #ccc;
      border-radius: 10px;
      background: #fafafa;
      font-size: 15px;
      font-weight: 600;
      color: #000;
      caret-color: #006400;
      transition: all 0.3s;
      box-sizing: border-box;
    }
    .input-group input:focus,
    .input-group select:focus {
      border-color: #00b300;
      box-shadow: 0 0 8px rgba(0,180,0,0.6);
      background: #fff;
      outline: none;
    }
    body.dark-mode .input-group input,
    body.dark-mode .input-group select {
      background: #000;
      color: #fff;
      border: 2px solid #444;
    }
    body.dark-mode .input-group input:focus,
    body.dark-mode .input-group select:focus {
      border-color: #00ff66;
      box-shadow: 0 0 10px rgba(0,255,100,0.7);
    }
    .input-group label {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
      font-size: 15px;
      pointer-events: none;
      transition: 0.3s ease all;
      background: transparent;
      padding: 0 4px;
    }
    .input-group input:focus + label,
    .input-group input:not(:placeholder-shown) + label {
      top: -8px;
      left: 12px;
      font-size: 12px;
      color: #008000;
      font-weight: bold;
      background: #fff;
    }
    body.dark-mode .input-group input:focus + label,
    body.dark-mode .input-group input:not(:placeholder-shown) + label {
      color: #00ff66;
      background: #1c1c1c;
    }
    button {
      width: 100%;
      padding: 14px;
      margin-top: 22px;
      background: linear-gradient(90deg, #008000, #00b300);
      border: none;
      border-radius: 12px;
      font-size: 17px;
      font-weight: bold;
      color: #fff;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,128,0,0.4);
      transition: all 0.3s;
    }
    button:hover {
      background: linear-gradient(90deg, #00b300, #00e600);
      box-shadow: 0 0 20px rgba(0,255,0,0.7);
      transform: translateY(-2px);
    }
    .mode-toggle {
      margin-bottom: 20px;
      cursor: pointer;
      display: inline-block;
      transition: transform 0.5s ease;
    }
    .mode-toggle.rotate-left { transform: rotate(-180deg); }
    .mode-toggle.rotate-right { transform: rotate(180deg); }
    #qrcode img {
      margin-top: 20px;
      border-radius: 14px;
      border: 3px solid #008000;
      width: 100%;
      max-width: 260px;
      height: auto;
      box-shadow: 0 0 15px rgba(0,180,0,0.5);
    }
    @media (max-width: 750px) {
      .container { padding: 18px; max-width: 350px; }
      h2 { font-size: 16px; }
      .input-group input, .input-group select { font-size: 14px; padding: 10px; }
      button { font-size: 15px; padding: 12px; }
      #qrcode img { max-width: 200px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="mode-toggle" id="colorMode">
      <svg class="color-mode" height="40" viewBox="0 0 400 400" width="40">
        <circle cx="200" cy="200" fill="white" r="195" stroke="#000" stroke-width="10"></circle>
        <path d="M 200 375 A 175 175 0 0 1 200 25"></path>
        <path d="M 200 300 A 100 100 0 0 1 200 100" fill="#FFF"></path>
        <path d="M 200 100 A 100 100 180 0 1 200 300"></path>
      </svg>
    </div>

    <h2>PH·∫†M VƒÇN HO√Ä BUID VIETQR NAPAS 247</h2>

    <div class="input-group">
      <select id="bank" required>
        <option value="">-- Ch·ªçn Ng√¢n H√†ng --</option>
        <option value="VCB">Vietcombank</option>
        <option value="TCB">Techcombank</option>
        <option value="ACB">ACB</option>
        <option value="BIDV">BIDV</option>
        <option value="MB">MB Bank</option>
        <option value="VPB">VPBank</option>
        <option value="HDB">HDBank</option>
        <option value="VIB">VIB</option>
        <option value="SHB">SHB</option>
        <option value="SCB">SCB</option>
        <option value="OCB">OCB</option>
        <option value="ABB">ABBANK</option>
        <option value="PGB">PGBank</option>
        <option value="EIB">Eximbank</option>
        <option value="SGB">Saigonbank</option>
        <option value="BAB">Bac A Bank</option>
        <option value="KLB">KienLongBank</option>
        <option value="VRB">VRB</option>
        <option value="GPB">GPBank</option>
        <option value="SEAB">SeABank</option>
        <option value="CBB">CBBank</option>
      </select>
    </div>

    <div class="input-group">
      <input type="text" id="account" placeholder=" " required>
      <label for="account">S·ªë t√†i kho·∫£n</label>
    </div>

    <div class="input-group">
      <input type="text" id="name" placeholder=" " required>
      <label for="name">T√™n t√†i kho·∫£n</label>
    </div>

    <div class="input-group">
      <input type="text" id="amount" placeholder=" " required>
      <label for="amount">S·ªë ti·ªÅn (VND)</label>
    </div>

    <div class="input-group">
      <input type="text" id="content" placeholder=" ">
      <label for="content">N·ªôi dung chuy·ªÉn kho·∫£n</label>
    </div>

    <button id="generateBtn">T·∫°o QR</button>
    <div id="qrcode"></div>
    <div id="download"></div>
  </div>

  <script>
    const accountInput = document.getElementById('account');
    const nameInput = document.getElementById('name');
    const amountInput = document.getElementById('amount');
    const generateBtn = document.getElementById('generateBtn');
    const qrcodeDiv = document.getElementById('qrcode');
    const downloadDiv = document.getElementById('download');
    const colorModeBtn = document.getElementById('colorMode');
    const body = document.body;

    // üëâ S·ªë t√†i kho·∫£n: ch·ªØ + s·ªë, ch·ªØ in hoa
    accountInput.addEventListener('input', e => {
      e.target.value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, "");
    });

    // üëâ T√™n t√†i kho·∫£n: ch·ªâ ch·ªØ + kho·∫£ng tr·∫Øng, in hoa
    nameInput.addEventListener('input', e => {
      e.target.value = e.target.value.replace(/[^A-Za-z√Ä-·ªπ\s]/g, "").toUpperCase();
    });

    // üëâ S·ªë ti·ªÅn: t·ª´ 0 ƒë·∫øn v√¥ h·∫°n
    amountInput.addEventListener('input', e => {
      let rawValue = e.target.value.replace(/\D/g, "");
      if (rawValue === "") { e.target.value = ""; return; }
      let num = parseInt(rawValue);
      e.target.value = num.toLocaleString('vi-VN');
    });

    // Dark/Light Mode
    let isDark = false;
    colorModeBtn.addEventListener('click', () => {
      isDark = !isDark;
      body.classList.toggle('dark-mode', isDark);
      colorModeBtn.classList.remove('rotate-left', 'rotate-right');
      colorModeBtn.classList.add(isDark ? 'rotate-right' : 'rotate-left');
    });

    // Generate QR
    generateBtn.addEventListener('click', () => {
      let bank = document.getElementById('bank').value;
      let account = accountInput.value.trim();
      let name = nameInput.value.trim();
      let amount = amountInput.value.replace(/\D/g, "");
      let content = document.getElementById('content').value.trim();

      if (!bank || !account || !name || amount === "") {
        alert("Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin!");
        return;
      }

      let numAmount = parseInt(amount);
      if (isNaN(numAmount)) numAmount = 0;

      let qrUrl = `https://img.vietqr.io/image/${bank}-${account}-compact2.png?amount=${numAmount}&addInfo=${encodeURIComponent(content)}&accountName=${encodeURIComponent(name)}`;
      qrcodeDiv.innerHTML = `<img src="${qrUrl}" alt="QR Code">`;
      downloadDiv.innerHTML = `<a href="${qrUrl}" download="vietqr.png">‚¨áÔ∏è T·∫£i QR v·ªÅ m√°y</a>`;
    });
  </script>
</body>
</html>
